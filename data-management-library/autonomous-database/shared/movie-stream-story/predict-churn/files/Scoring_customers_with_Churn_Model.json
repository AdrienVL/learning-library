{"paragraphs":[{"text":"%md\n\n# Using the OML AutoML UI model for scoring\n\nIn this simple scoring exercise we will use the model that was created in the OML AutoML UI to score the customers in the existing `MOVIESTREAM_CHURN` table, in order to prepare a list of potential customers to contact for offers.\n\nWe need to make sure that in the OML AutoML UI we renamed the model to use this new name in the *PREDICTION* and *PREDICTION_PROBABILITY* SQL functions.  In the code below we are assuming the name `CHURN_PREDICTION_AUTOML_RF`, so adjust as necessary.","user":"MOVIESTREAM","dateUpdated":"2021-08-12T07:12:22+0000","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"editorSetting":{"language":"md","editOnDblClick":false},"editorHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Using the OML AutoML UI model for scoring</h1>\n<p>In this simple scoring exercise we will use the model that was created in the OML AutoML UI to score the customers in the existing <code>MOVIESTREAM_CHURN</code> table, in order to prepare a list of potential customers to contact for offers.</p>\n<p>We need to make sure that in the OML AutoML UI we renamed the model to use this new name in the <em>PREDICTION</em> and <em>PREDICTION_PROBABILITY</em> SQL functions.  In the code below we are assuming the name <code>CHURN_PREDICTION_AUTOML_RF</code>, so adjust as necessary.</p>\n"}]},"interrupted":false,"jobName":"paragraph_1628751719640_-654747066","id":"20210812-070159_1130433672","dateCreated":"2021-08-11T07:03:45+0000","dateStarted":"2021-08-12T07:12:18+0000","dateFinished":"2021-08-12T07:12:20+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":true,"focus":true,"$$hashKey":"object:40"},{"text":"%script\n\nBEGIN EXECUTE IMMEDIATE 'DROP TABLE POTENTIAL_CHURNERS';\n      EXCEPTION WHEN OTHERS THEN NULL; \nEND;","user":"MOVIESTREAM","dateUpdated":"2021-08-12T07:08:38+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"plsql","editOnDblClick":false},"editorMode":"ace/mode/plsql","title":true},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1628751834200_-458743075","id":"20210812-070354_2080105966","dateCreated":"2021-08-12T07:03:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:41","dateFinished":"2021-08-12T07:07:01+0000","dateStarted":"2021-08-12T07:06:47+0000","title":"Remove the table if it exists","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"\nPL/SQL procedure successfully completed.\n\n"}]}},{"text":"%sql\n\nCREATE TABLE POTENTIAL_CHURNERS AS   \nSELECT * FROM \n      (SELECT CUST_ID, \n              PREDICTION(CHURN_PREDICTION_AUTOML_RF USING M.*) WILL_CHURN,\n              ROUND(PREDICTION_PROBABILITY(CHURN_PREDICTION_AUTOML_RF, '1'  USING M.*),6) PROB_CHURN\n              FROM MOVIESTREAM_CHURN M)\n       ORDER BY PROB_CHURN DESC;\n\n","user":"MOVIESTREAM","dateUpdated":"2021-08-12T07:08:56+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"CUST_ID":"string","WILL_CHURN":"string","PROB_CHURN":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"interrupted":false,"jobName":"paragraph_1628751719640_747059519","id":"20210812-070159_1539999212","dateCreated":"2021-08-11T07:05:21+0000","dateStarted":"2021-08-12T07:07:02+0000","dateFinished":"2021-08-12T07:07:02+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:42","title":"Create a new table POTENTIAL_CHURNERS"},{"text":"%sql\n\nSELECT * FROM POTENTIAL_CHURNERS SAMPLE(0.2)\n         ORDER BY PROB_CHURN DESC;\n","user":"MOVIESTREAM","dateUpdated":"2021-08-12T07:09:22+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"CUST_ID":"string","WILL_CHURN":"string","PROB_CHURN":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql","title":true},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1628751976721_1456891731","id":"20210812-070616_1149901638","dateCreated":"2021-08-12T07:06:16+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":false,"focus":true,"$$hashKey":"object:440","dateFinished":"2021-08-12T07:08:04+0000","dateStarted":"2021-08-12T07:08:04+0000","title":"Review a sample output","results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"CUST_ID\tWILL_CHURN\tPROB_CHURN\n1306042\t1\t1\n1420356\t1\t1\n1368829\t1\t0.985882\n1166476\t1\t0.985882\n1092119\t1\t0.985882\n1369981\t1\t0.810811\n1257447\t1\t0.810811\n1061381\t1\t0.810811\n1029124\t1\t0.810811\n1380145\t1\t0.810811\n1394247\t1\t0.709402\n1192690\t1\t0.709402\n1158546\t1\t0.709402\n1120296\t1\t0.709402\n1085696\t1\t0.709402\n1053316\t1\t0.709402\n1018312\t1\t0.709402\n1017261\t1\t0.709402\n1402482\t1\t0.709402\n1403296\t0\t0.236364\n1308969\t0\t0.236364\n1285233\t0\t0.236364\n1237115\t0\t0.236364\n1319068\t0\t0.236364\n1135935\t0\t0.236364\n1159564\t0\t0.236364\n1146129\t0\t0.236364\n1013690\t0\t0.236364\n1218366\t0\t0.236364\n1420033\t0\t0.236364\n1353962\t0\t0.236364\n1311405\t0\t0.236364\n1112313\t0\t0.236364\n1309141\t0\t0.236364\n1195680\t0\t0.010554\n1003184\t0\t0.010554\n1392256\t0\t0.010554\n1148632\t0\t0.010554\n1268857\t0\t0.010554\n1192216\t0\t0.010554\n1129824\t0\t0.010554\n1323982\t0\t0.010554\n1293485\t0\t0.010554\n1168332\t0\t0.010554\n1062086\t0\t0.010554\n1164970\t0\t0.010554\n1178128\t0\t0.010554\n1197522\t0\t0.010554\n1393511\t0\t0.010554\n1097893\t0\t0.010554\n1192940\t0\t0.010554\n1056193\t0\t0.010554\n1099112\t0\t0.010554\n1175909\t0\t0.010554\n1238872\t0\t0.010554\n1161878\t0\t0.010554\n1396470\t0\t0.010554\n1150121\t0\t0.010554\n1286404\t0\t0.010554\n1346462\t0\t0.010554\n1198088\t0\t0.010554\n1239600\t0\t0.010554\n1221760\t0\t0.010554\n1154393\t0\t0.010554\n1387271\t0\t0.010554\n1002311\t0\t0.010554\n1297000\t0\t0.010554\n1147216\t0\t0.010554\n1012511\t0\t0.010554\n1329725\t0\t0.010554\n1218647\t0\t0.010554\n1175315\t0\t0.010554\n1359690\t0\t0.010554\n1254543\t0\t0.010554\n1067438\t0\t0.010554\n1181935\t0\t0.010554\n1123944\t0\t0.010554\n1246743\t0\t0.010554\n1393321\t0\t0.010554\n1075758\t0\t0.010554\n1103149\t0\t0.010554\n1420283\t0\t0.010554\n1378607\t0\t0.010554\n1367993\t0\t0.010554\n1194716\t0\t0.010554\n1067417\t0\t0.010554\n1162422\t0\t0.010554\n1097830\t0\t0.010554\n1020137\t0\t0.010554\n1022938\t0\t0.010554\n1032578\t0\t0.010554\n1194589\t0\t0.010554\n1094159\t0\t0.010554\n1402151\t0\t0.010554\n1012198\t0\t0.010554\n1407841\t0\t0.010554\n1143125\t0\t0.010554\n1025928\t0\t0.010554\n1059993\t0\t0.010554\n1058369\t0\t0.010554\n1406786\t0\t0.010554\n1017118\t0\t0.010554\n1439990\t0\t0.010554\n1395106\t0\t0.010554\n1216665\t0\t0.010554\n1196700\t0\t0.010554\n1204024\t0\t0.010554\n1296662\t0\t0.010554\n1008385\t0\t0.010554\n1179776\t0\t0.010554\n1028635\t0\t0.010554\n1047567\t0\t0.010554\n1086701\t0\t0.010554\n1187596\t0\t0.010554\n1119604\t0\t0.010554\n1392374\t0\t0.010554\n1256993\t0\t0.010554\n1291155\t0\t0.010554\n1142690\t0\t0.010554\n1244812\t0\t0.010554\n1133338\t0\t0.010554\n1011786\t0\t0.010554\n1033632\t0\t0.010554\n1310981\t0\t0.010554\n1385259\t0\t0.010554\n1191267\t0\t0.010554\n1438779\t0\t0.010554\n1080125\t0\t0.010554\n1232075\t0\t0.010554\n1246870\t0\t0.010554\n1192865\t0\t0.010554\n1066382\t0\t0.010554\n1155839\t0\t0.010554\n1100416\t0\t0.010554\n1156625\t0\t0.010554\n1211359\t0\t0.010554\n1161971\t0\t0.010554\n1148380\t0\t0.010554\n1019275\t0\t0.010554\n1094612\t0\t0.010554\n1193656\t0\t0.010554\n1133263\t0\t0.010554\n1112341\t0\t0.010554\n1064325\t0\t0.010554\n1134248\t0\t0.010554\n1446294\t0\t0.010554\n1153089\t0\t0.010554\n1328864\t0\t0.010554\n1012918\t0\t0.010554\n1271548\t0\t0.010554\n1173950\t0\t0.010554\n1196525\t0\t0.010554\n1124707\t0\t0.010554\n1159731\t0\t0.010554\n1306548\t0\t0.010554\n1201602\t0\t0.010554\n1079768\t0\t0.010554\n1150877\t0\t0.010554\n1053668\t0\t0.010554\n1159031\t0\t0.010554\n1275581\t0\t0.010554\n1093985\t0\t0.010554\n1163526\t0\t0.010554\n1096818\t0\t0.010554\n1123849\t0\t0.010554\n1172843\t0\t0.010554\n1410029\t0\t0.010554\n1075973\t0\t0.010554\n1313981\t0\t0.010554\n1063282\t0\t0.010554\n1430254\t0\t0.010554\n1369920\t0\t0.010554\n1277092\t0\t0.010554\n1029930\t0\t0.010554\n1224195\t0\t0.010554\n1393286\t0\t0.010554\n1431252\t0\t0.010554\n1136647\t0\t0.010554\n1007762\t0\t0.010554\n1009158\t0\t0.010554\n1246336\t0\t0.010554\n1024140\t0\t0.010554\n1166032\t0\t0.010554\n1097891\t0\t0.010554\n1162978\t0\t0.010554\n1278758\t0\t0.010554\n1220020\t0\t0.010554\n1222272\t0\t0.010554\n1166126\t0\t0.010554\n1195871\t0\t0.010554\n1131890\t0\t0.010554\n1024766\t0\t0.010554\n1130463\t0\t0.010554\n1024440\t0\t0.010554\n1266199\t0\t0.010554\n1313018\t0\t0.010554\n1092216\t0\t0.010554\n1332438\t0\t0.010554\n1080563\t0\t0.010554\n1246926\t0\t0.010554\n1348532\t0\t0.006757\n1353560\t0\t0.006757\n1376710\t0\t0.006757\n1406746\t0\t0.006757\n1243092\t0\t0.006757\n1234937\t0\t0.006757\n1295038\t0\t0.006757\n1299867\t0\t0.006757\n1031710\t0\t0.006757\n1424420\t0\t0.006757\n1291804\t0\t0.006757\n1247813\t0\t0.006757\n1173084\t0\t0.006757\n1014971\t0\t0.006757\n1088954\t0\t0.006757\n1176082\t0\t0.006757\n1400161\t0\t0.006757\n1067589\t0\t0.006757\n1283109\t0\t0.006757\n1383558\t0\t0.006757\n1168280\t0\t0.006757\n1172676\t0\t0.006757\n1169105\t0\t0.006757\n1114753\t0\t0.006757\n1387428\t0\t0.006757\n1291740\t0\t0.006757\n1241261\t0\t0.006757\n1069767\t0\t0.006757\n1438526\t0\t0.006757\n1326169\t0\t0.006757\n1034017\t0\t0.006757\n1035577\t0\t0.006757\n1437771\t0\t0.006757\n1173593\t0\t0.006757\n1369319\t0\t0.006757\n1133755\t0\t0.006757\n1154233\t0\t0.006757\n1323794\t0\t0.006757\n1312031\t0\t0.006757\n1020902\t0\t0.006757\n1070203\t0\t0.006757\n1186820\t0\t0.006757\n1023846\t0\t0.006757\n1437766\t0\t0.006757\n1087471\t0\t0.006757\n1418676\t0\t0.006757\n1082280\t0\t0.006757\n1027761\t0\t0.006757\n1048260\t0\t0.006757\n1147473\t0\t0.006757\n1134175\t0\t0.006757\n1068013\t0\t0\n1299144\t0\t0\n1102196\t0\t0\n1095953\t0\t0\n1277656\t0\t0\n1033384\t0\t0\n1159079\t0\t0\n1338007\t0\t0\n1182426\t0\t0\n1174404\t0\t0\n1098265\t0\t0\n1388968\t0\t0\n1182679\t0\t0\n1217467\t0\t0\n1438747\t0\t0\n1072797\t0\t0\n1351271\t0\t0\n"}]}},{"text":"%sql\n","user":"MOVIESTREAM","dateUpdated":"2021-08-12T07:07:03+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/osql"},"settings":{"params":{},"forms":{}},"interrupted":false,"jobName":"paragraph_1628751719640_-842185443","id":"20210812-070159_355016687","dateCreated":"2021-08-11T07:11:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"commited":false,"$$hashKey":"object:43"}],"name":"Scoring customers with Churn Model","id":"529593","noteParams":{},"noteForms":{},"angularObjects":{"ORA7A60DC9B32:shared_process":[],"ORA96849F3DDA:shared_process":[],"ORA7CC90ACC73:shared_process":[],"MDWA0063E96A6:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}